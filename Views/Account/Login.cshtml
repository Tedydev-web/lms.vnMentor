@using vnMentor.Models
@using vnMentor.Resources
@using Microsoft.Extensions.Configuration
@inject IConfiguration Configuration;
@model vnMentor.Models.LoginViewModel
@{
    ViewBag.Title = Resource.Login;
}

@await Html.PartialAsync("~/Views/Shared/_Notification.cshtml")

<style>
    .section-background {
        position: relative;
        overflow: hidden;
        height: 100vh;
    }

    .carousel-background {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
    }

    .carousel-item {
        height: 100vh;
    }

    .carousel-item img {
        object-fit: cover;
        width: 100%;
        height: 100%;
    }

    .section-content {
        position: relative;
        z-index: 2;
        padding: 2rem;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        padding-top: 0px !important;
    }

    .form-wrapper {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        /* Đảm bảo rằng không gian được phân bổ đều giữa các phần tử */
        position: relative;
        background-color: rgba(255, 255, 255, 0.8);
        border-radius: 20px;
        padding: 2rem;
        width: 100%;
        max-width: 800px;
        margin: auto;
        /* Center the form-wrapper */
        height: 100%;
        /* Đảm bảo rằng form-wrapper chiếm hết chiều cao của khu vực chứa nó */
        margin-bottom: 100px;
    }

    .wrapper-logo {
        margin: 20px 0 80px;
        /* Điều chỉnh khoảng cách dưới logo nếu cần */
        font-size: 35px;
        font-weight: 600;
        text-align: center;
        line-height: 100px;
        color: #fff;
        user-select: none;
        border-radius: 15px 15px 0 0;
        @*background-color:rgba(128,128,128,0.582);*@
    }

    .logo-img {
        width: 70%;
        /* Thay đổi kích thước của logo nếu cần */
        height: auto;
        display: block;
        margin-left: auto;
        margin-right: auto;
    }

    #submit {
        padding: 20px 60px;
        background-color: #000;
        border: none;
        font-size: 18px;
        position: relative;
        overflow: hidden;
        transition: 200ms;
        box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.5);
        width: 100%;
    }

    #submit span {
        color: #231e20;
        position: relative;
        transition: 200ms;
        transition-delay: 200ms;
        font-size: 16px;
        text-transform: uppercase;
        letter-spacing: 2px;
        font-weight: 600;
    }

    #submit:before {
        content: '';
        position: absolute;
        width: 0%;
        height: 0%;
        left: 50%;
        right: 50%;
        top: 50%;
        bottom: 50%;
        transition: 200ms;
        transition-delay: 200ms;
        background-color: #e87900;
        box-shadow: 0 0 10px #e87900, 0 0 30px #e87900, 0 0 50px #e87900;
    }

    #submit div {
        transition: 200ms;
        position: absolute;
        background-color: #fff;
        box-shadow: 0 0 15px #e87900, 0 0 30px #e87900, 0 0 50px #e87900;
    }

    #submit .top {
        width: 15px;
        height: 2px;
        top: 0;
        left: 0;
    }

    #submit .bottom {
        width: 15px;
        height: 2px;
        bottom: 0;
        right: 0;
    }

    #submit .left {
        width: 2px;
        height: 15px;
        top: 0;
        left: 0;
    }

    #submit .right {
        width: 2px;
        height: 15px;
        bottom: 0;
        right: 0;
    }

    #submit:hover {
        color: #fff;
    }

    #submit:hover span {
        color: #fff;
    }

    #submit:hover:before {
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
    }

    #submit:hover .top,
    #submit:hover .bottom {
        width: 100%;
    }

    #submit:hover .left,
    #submit:hover .right {
        height: 100%;
    }

    .input-group {
        display: flex;
        align-items: center;
    }

    .input-group-text {
        cursor: pointer;
        background-color: transparent;
        border: none;
        font-size: 1.2rem;
    }

    #Register {
        display: flex;
        justify-content: center;
        margin-top: 20px;
        font-size: 18px;
    }

    .dont-have-account {
        color: black;
    }

</style>

<div class="section-background">
    <div id="loginCarousel" class="carousel slide carousel-background" data-bs-ride="carousel">
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#loginCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
            <button type="button" data-bs-target="#loginCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
            <button type="button" data-bs-target="#loginCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
        </div>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="https://res.cloudinary.com/dfzhyunci/image/upload/vnMentor/slide/Slider_01.webp" class="d-block w-100" alt="Login 1" />
            </div>
            <div class="carousel-item">
                <img src="https://res.cloudinary.com/dfzhyunci/image/upload/vnMentor/slide/Slider_02.webp" class="d-block w-100" alt="Login 2" />
            </div>
            <div class="carousel-item">
                <img src="https://res.cloudinary.com/dfzhyunci/image/upload/vnMentor/slide/Slider_03.webp" class="d-block w-100" alt="Login 3" />
            </div>
        </div>
    </div>

    <section class="py-10 px-3 px-sm-5 section-content">
        <div class="container">
            <div class="row justify-content-center align-items-center gx-0 gx-sm-5">
                <div class="col-lg-6" id="wrapper">
                    <div class="wrapper-logo">
<img src="https://res.cloudinary.com/dfzhyunci/image/upload/vnMentor/logo/vnMentor_largeLogo.webp"
     alt="vnMentor Logo"
     class="logo-img"
     width="400"
     height="200" />
                    </div>
                    <div class="form-wrapper">
                        <h1 class="fw600 pb-2 title-lg text-center text-lg-start"><span class="color-primarycolor">@Resource.Login</span></h1>
                        <div class="pb-3 text-center text-lg-start">@Resource.FillInYourUsernameAndPasswordToSignIn</div>
                        @if (Configuration.GetValue<string>("environment") == "prod")
                        {
                            <div class="pb-2 text-edit text-center text-lg-start">
                                Demo Username: <span class="fw600">nsadmin</span>, Password: <span class="fw600">Admin@123</span>&nbsp;&nbsp;<i id="copyDemoBtn" class="p-1 fa-solid fa-copy cursor-pointer"
                                    data-bs-toggle="tooltip" data-bs-placement="top" title="Copy"></i>
                            </div>
                        }
                        @Html.ValidationSummary("", new { @class = "invalid-message" })
                        @using (Html.BeginForm("Login", "Account", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, null, new { @class = "form-horizontal", role = "form" }))
                        {
                            @Html.AntiForgeryToken()
                            <div class="mb-3 text-break">
                                <div class="form-group">
                                    @Html.LabelFor(model => model.UserName, htmlAttributes: new { @class = "form-label required fw600" })
                                    @Html.EditorFor(model => model.UserName, new { htmlAttributes = new { @class = "form-control", @placeholder = @Resource.Username } })
                                    @Html.ValidationMessageFor(model => model.UserName, "", new { @class = "invalid-message" })
                                </div>
                            </div>
                            <div class="mb-3 text-break">
                                <div class="form-group">
                                    @Html.LabelFor(model => model.Password, htmlAttributes: new { @class = "form-label required fw600" })
                                    <div class="input-group">
                                        @Html.EditorFor(model => model.Password, new
                                            {
                                                htmlAttributes = new { @class = "form-control password-input", @type = "password", @placeholder = @Resource.Password }
                                            })
                                        <span class="input-group-text" id="togglePassword" title="Show Password">
                                            <i class="fa-solid fa-eye-slash"></i> <!-- Font Awesome eye-slash icon -->
                                        </span>
                                    </div>
                                    @Html.ValidationMessageFor(model => model.Password, "", new { @class = "invalid-message" })
                                </div>
                            </div>
                            <div class="row gx-0 mb-4">
                                <div class="col-md-6">
                                    <div class="form-check">
                                        @Html.CheckBoxFor(m => m.RememberMe, htmlAttributes: new { @class = "form-check-input", @type = "checkbox" })
                                        @Html.LabelFor(model => model.RememberMe, htmlAttributes: new { @class = "form-check-label small fw-light" })
                                    </div>
                                </div>
                                <div class="col-md-6 text-start text-md-end">
                                    <a class="small fw500 color-secondarycolor hover-color-primarycolor" href="@Url.Action("ForgotPassword")">@Resource.ForgotYourPassword</a>
                                </div>
                            </div>
                            @* <button type="submit" class="btn form-btn btn-primary w-100 hover-boxshadow hover-moveup">@Resource.Submit</button> *@
                            @* <button type="submit" class="btn form-btn btn-primary hover-boxshadow hover-moveup">@Resource.Submit</button> *@
                            <button id="submit" type="submit" class="btn form-btn btn-primary hover-boxshadow hover-moveup">
                                <span>@Resource.Submit</span>
                                <div class="top"></div>
                                <div class="left"></div>
                                <div class="bottom"></div>
                                <div class="right"></div>
                            </button>
                            <div class="col-md-12" id="Register">
                                <a class="small fw500 color-secondarycolor hover-color-primarycolor" href="@Url.Action("Register")">
                                    <span class="dont-have-account">@Resource.DontHaveAccount</span> @Resource.Register
                                </a>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const passwordInput = document.querySelector('.password-input');
            const togglePassword = document.getElementById('togglePassword');
            const eyeIcon = togglePassword.querySelector('i');

            togglePassword.addEventListener('click', function () {
                const isPasswordVisible = passwordInput.type === 'text';

                passwordInput.type = isPasswordVisible ? 'password' : 'text';
                eyeIcon.classList.toggle('fa-eye-slash', isPasswordVisible);
                eyeIcon.classList.toggle('fa-eye', !isPasswordVisible);
            });
        });
    </script>


}